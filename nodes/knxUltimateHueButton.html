<script type="text/javascript">
    RED.nodes.registerType('knxUltimateHueButton', {
        category: "KNX Ultimate",
        color: '#C7E9C0',
        defaults: {
            //buttonState: {value: true},
            server: { type: "knxUltimate-config", required: true },
            serverHue: { type: "hue-config", required: true },
            name: { value: "Hue Button (beta)" },

            nameinitial_press: { value: "" },
            GAinitial_press: { value: "" },
            dptinitial_press: { value: "" },

            namerepeat: { value: "" },
            GArepeat: { value: "" },
            dptrepeat: { value: "" },

            nameshort_release: { value: "" },
            GAshort_release: { value: "" },
            dptshort_release: { value: "" },

            namelong_release: { value: "" },
            GAlong_release: { value: "" },
            dptlong_release: { value: "" },

            namedouble_short_release: { value: "" },
            GAdouble_short_release: { value: "" },
            dptdouble_short_release: { value: "" },

            namelong_press: { value: "" },
            GAlong_press: { value: "" },
            dptlong_press: { value: "" },

            toggleValues: { value: true },
            hueDevice: { value: "" }
        },
        inputs: 0,
        outputs: 0,
        icon: "node-hue-icon.svg",
        label: function () {
            return (this.name);
        },
        paletteLabel: "Hue Button",
        // button: {
        //     enabled: function() {
        //         // return whether or not the button is enabled, based on the current
        //         // configuration of the node
        //         return !this.changed
        //     },
        //     visible: function() {
        //         // return whether or not the button is visible, based on the current
        //         // configuration of the node
        //         return this.hasButton
        //     },
        //     //toggle: "buttonState",
        //     onclick: function() {}
        // },
        oneditprepare: function () {
            var node = this;
            var oNodeServer = RED.nodes.node($("#node-input-server").val()); // Store the config-node
            var oNodeServerHue = RED.nodes.node($("#node-input-serverHue").val()); // Store the config-node

            // 19/02/2020 Used to get the server sooner als deploy.
            $("#node-input-server").change(function () {
                try {
                    oNodeServer = RED.nodes.node($(this).val());
                } catch (error) { }
            });
            // 19/02/2020 Used to get the server sooner als deploy.
            $("#node-input-serverHue").change(function () {
                try {
                    oNodeServerHue = RED.nodes.node($(this).val());
                } catch (error) { }
            });

            // 31/03/2020 Search Helper
            function fullSearch(sourceText, searchString) {
                // This searches for all words in a string
                var aSearchWords = searchString.toLowerCase().split(" ");
                var i = 0;
                for (let index = 0; index < aSearchWords.length; index++) {
                    if (sourceText.toLowerCase().indexOf(aSearchWords[index]) > -1) i += 1;
                }
                return i == aSearchWords.length;
            }

            // DPT Switch command
            // ########################
            $.getJSON('knxUltimateDpts', (data) => {
                data.forEach(dpt => {
                    if (dpt.value.startsWith("1.")) {
                        $("#node-input-dptinitial_press").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                    }
                });
                $("#node-input-dptinitial_press").val(this.dptinitial_press)
            })

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GAinitial_press").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    //$.getJSON("csv", request, function( data, status, xhr ) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term + " 1.")) {
                                return {
                                    label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                    value: value.ga // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-nameinitial_press').val(sDevName);
                    var optVal = $("#node-input-dptinitial_press option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptinitial_press").val(optVal);
                }
            });
            // ######################## 



            // DPT repeat
            // ########################
            $.getJSON('knxUltimateDpts', (data) => {
                data.forEach(dpt => {
                    if (dpt.value.startsWith("1.") || dpt.value.startsWith("3.007")) {
                        $("#node-input-dptrepeat").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                    }
                });

                $("#node-input-dptrepeat").val(this.dptrepeat)
            })

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GArepeat").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term)) {
                                if (value.dpt.startsWith('1.') || value.dpt.startsWith('3.007')) {
                                    return {
                                        label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                        value: value.ga // Value
                                    }
                                } else { return null; }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-namerepeat').val(sDevName);
                    var optVal = $("#node-input-dptrepeat option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptrepeat").val(optVal);
                }
            });


            // DPT dptshort_release
            // ########################
            $.getJSON('knxUltimateDpts', (data) => {
                data.forEach(dpt => {
                    if (dpt.value.startsWith('1.')) {
                        $("#node-input-dptshort_release").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                    }
                });

                $("#node-input-dptshort_release").val(this.dptshort_release)

            })

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GAshort_release").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term + " 1.")) {
                                return {
                                    label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                    value: value.ga // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-nameshort_release').val(sDevName);
                    var optVal = $("#node-input-dptshort_release option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptshort_release").val(optVal);
                }
            });


            // DPT dptlong_release and dptLightColorStateƒ
            // ########################
            $.getJSON('knxUltimateDpts', (data) => {
                data.forEach(dpt => {
                    if (dpt.value.startsWith('1.')) {
                        $("#node-input-dptlong_release").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                        $("#node-input-dptdouble_short_release").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                    }
                });

                $("#node-input-dptlong_release").val(this.dptlong_release)
                $("#node-input-dptdouble_short_release").val(this.dptdouble_short_release)

            })

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GAlong_release").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term + " 1.")) {
                                return {
                                    label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                    value: value.ga // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-namelong_release').val(sDevName);
                    var optVal = $("#node-input-dptlong_release option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptlong_release").val(optVal);
                }
            });

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GAdouble_short_release").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term + " 1.")) {
                                return {
                                    label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                    value: value.ga // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-namedouble_short_release').val(sDevName);
                    var optVal = $("#node-input-dptdouble_short_release option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptdouble_short_release").val(optVal);
                }
            });



            // DPT dptlong_press 
            // ########################
            $.getJSON('knxUltimateDpts', (data) => {
                data.forEach(dpt => {
                    if (dpt.value.startsWith('1.')) {
                        $("#node-input-dptlong_press").append($("<option></option>")
                            .attr("value", dpt.value)
                            .text(dpt.text))
                    }
                });

                $("#node-input-dptlong_press").val(this.dptlong_press)

            })

            // Autocomplete suggestion with ETS csv File
            $("#node-input-GAlong_press").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("knxUltimatecsv?nodeID=" + oNodeServer.id, (data) => {
                        response($.map(data, function (value, key) {
                            var sSearch = (value.ga + " (" + value.devicename + ") DPT" + value.dpt);
                            if (fullSearch(sSearch, request.term + " 1.")) {
                                return {
                                    label: value.ga + " # " + value.devicename + " # " + value.dpt, // Label for Display
                                    value: value.ga // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets Datapoint and device name automatically
                    var sDevName = ui.item.label.split("#")[1].trim();
                    try {
                        sDevName = sDevName.substr(sDevName.indexOf(")") + 1).trim();
                    } catch (error) {
                    }
                    $('#node-input-namelong_press').val(sDevName);
                    var optVal = $("#node-input-dptlong_press option:contains('" + ui.item.label.split("#")[2].trim() + "')").attr('value');
                    // Select the option value 
                    $("#node-input-dptlong_press").val(optVal);
                }
            });






            // Autocomplete suggestion with HUE Lights
            $("#node-input-name").autocomplete({
                minLength: 1,
                source: function (request, response) {
                    $.getJSON("KNXUltimateGetDevicesHUE?rtype=button&nodeID=" + oNodeServerHue.id, (data) => {
                        response($.map(data.devices, function (value, key) {
                            //alert(JSON.stringify(value) + " "+ key)
                            var sSearch = (value.name);
                            if (fullSearch(sSearch, request.term)) {
                                return {
                                    hueDevice: value.id, // Label for Display
                                    value: value.name // Value
                                }
                            } else {
                                return null;
                            }
                        }));
                    });
                }, select: function (event, ui) {
                    // Sets the fields
                    $('#node-input-hueDevice').val(ui.item.hueDevice);
                }
            });


            // ########################


        },
        oneditsave: function () {


        },
        oneditcancel: function () {

        }
    })

</script>

<script type="text/x-red" data-template-name="knxUltimateHueButton">


<div class="form-row">
    <b>HUE Light</b>&nbsp&nbsp<span style="color:red"
    &nbsp<i class="fa fa-question-circle"></i></span>
    &nbsp<a target="_blank" href="https://github.com/Supergiovane/node-red-contrib-knx-ultimate/wiki/en-hue-configuration"><u>Configuration</u></a> 
    <br />
    <p align="center"><img src='https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/hueButton.png'></p>
    <br />
    <label for="node-input-server" >
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAEZyIDYgQXVnIDIwMTAgMjE6NTI6MTkgKzAxMDD84aS8AAAAB3RJTUUH3gYYCicNV+4WIQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAACUSURBVHjaY2CgFZg5c+Z/ZEyWAZ8+f/6/ZsWs/xoamqMGkGrA6Wla/1+fVARjEBuGsSoGmY4eZSCNL59d/g8DIDbIAHR14OgFGQByKjIGKX5+6/T///8gGMQGiV1+/B0Fg70GIkD+RMYgxf/O5/7//2MSmAZhkBi6OrgB6Bg5DGB4ajr3f2xqsYYLSDE2THJUDg0AAAqyDVd4tp4YAAAAAElFTkSuQmCC"></img>
        KNX GW
    </label>
    <input type="text" id="node-input-server" />
</div>

<div class="form-row">
    <label for="node-input-serverHue">
        <img src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAABFUlEQVQ4EZWSsWoCQRCG1yiENEFEi6QSkjqWWoqFoBYJ+Br6JHkMn8Iibd4ihQpaJIhWNkry/ZtdGZY78Qa+m39nZ+dm9s4550awglNBluS/gVtAX6KgDclf68w2OThgfR9iT/jnoEv4TtByDThWTCDKW4SSZTf/zj9/eZbN+izTDuKGimu0vPF8B/YN8aC8LmcOj/AAn9CFTEs70Js/oGqy79C69bqJ5XbQI2kGO5N8QL9D08S8zBtBF5ZaVsznpCMoqJnVdjTpb1Db0fwIWmQV6BLXzFOYgA6/gDVfQN9bBWp2J2hdWDPoBV5FrKnAJutHikk/CHHR8i7x4iG7qQ720IYvu3GFbpHjx3pFrOFYkA354z/5bkK826phyAAAAABJRU5ErkJggg=="/>
        HUE Bridge
    </label>
    <input type="text" id="node-input-serverHue" />
</div>

<br/>
<p>
<b>Philips HUE</b>
</p>
    
<div class="form-row">
    <label for="node-input-hueDevice" >
        <i class="fa fa-play-circle"></i>&nbspHue Button</label>
        <input type="text" id="node-input-name" placeholder="Enter your hue device name" />
    <input type="hidden" id="node-input-hueDevice" />
</div>

<br/>

<!-- <p> <img src='https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/knx.png' width='32px'> -> <img src='https://raw.githubusercontent.com/Supergiovane/node-red-contrib-knx-ultimate/master/img/hue.png' width='32px'></p> -->

<p>
<b>PHILIPS HUE BUTTON EVENTS -> TO KNX</b>
</p>

    <div class="form-row">
        <label for="node-input-nameinitial_press" style="width:100px;"><i class="fa fa-play-circle-o"></i> Initial press</span></label>

        <label for="node-input-GAinitial_press" style="width:20px;">GA</label>
        <input type="text" id="node-input-GAinitial_press" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
    
        <label for="node-input-dptinitial_press" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptinitial_press" style="width:140px;"></select>
    
        <label for="node-input-nameinitial_press" style="width:50px; margin-left: 0px; text-align: right;">Name</label>
        <input type="text" id="node-input-nameinitial_press" style="width:200px;margin-left: 5px; text-align: left;">
    </div>

    <div class="form-row">
        <label for="node-input-namerepeat" style="width:100px;"><i class="fa fa-play-circle-o"></i> Repeat</span></label>

        <label for="node-input-GArepeat" style="width:20px;">GA</label>
        <input type="text" id="node-input-GArepeat" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
       
        <label for="node-input-dptrepeat" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptrepeat" style="width:140px;"></select>
       
        <label for="node-input-namerepeat" style="width:50px; margin-left: 0px; text-align: right;">Name</label>
        <input type="text" id="node-input-namerepeat" style="width:200px;margin-left: 5px; text-align: left;">
    </div>
    
    <div class="form-row">
        <label for="node-input-nameshort_release" style="width:100px;"><i class="fa fa-play-circle-o"></i>&nbspShort release</label>

        <label for="node-input-GAhort_release" style="width:20px;">GA</label>
        <input type="text" id="node-input-GAshort_release" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
       
        <label for="node-input-dptshort_release" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptshort_release" style="width:140px;"></select>
       
        <label for="node-input-nameshort_release" style="width:50px; margin-left: 0px; text-align: right;">Name</label>
        <input type="text" id="node-input-nameshort_release" style="width:200px;margin-left: 5px; text-align: left;">
    </div>

    <div class="form-row">
        <label for="node-input-namelong_release" style="width:100px;"><i class="fa fa-play-circle-o"></i>&nbspLong release</label>

        <label for="node-input-GAhort_release" style="width:20px;">GA</label>
        <input type="text" id="node-input-GAlong_release" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
       
        <label for="node-input-dptlong_release" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptlong_release" style="width:140px;"></select>
       
        <label for="node-input-namelong_release" style="width:50px; margin-left: 0px; text-align: right;">Name</label>
        <input type="text" id="node-input-namelong_release" style="width:200px;margin-left: 5px; text-align: left;">
    </div>

    <div class="form-row">
        <label for="node-input-namedouble_short_release" style="width:100px;"><i class="fa fa-play-circle-o"></i>&nbspDouble short release</label>

        <label for="node-input-GAdouble_short_release" style="width:20px;">GA</label>
        <input type="text" id="node-input-GAdouble_short_release" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
       
        <label for="node-input-dptdouble_short_release" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptdouble_short_release" style="width:140px;"></select>
       
        <label for="node-input-namedouble_short_release" style="width:50px; margin-left: 0px; text-align: right;"><span data-i18n="knxUltimateHueButton.node-input-name"></span></label>
        <input type="text" id="node-input-namedouble_short_release" style="width:200px;margin-left: 5px; text-align: left;">
    </div>

    <div class="form-row">
        <label for="node-input-namelong_press" style="width:100px;"><i class="fa fa-play-circle-o"></i>&nbspLong press</label>

        <label for="node-input-GAhort_release" style="width:20px;">GA</label>
        <input type="text" id="node-input-GAlong_press" placeholder="Ex: 1/1/1" style="width:70px;margin-left: 5px; text-align: left;">
       
        <label for="node-input-dptlong_press" style="width:40px; margin-left: 0px; text-align: right;">dpt</label>
        <select id="node-input-dptlong_press" style="width:140px;"></select>
       
        <label for="node-input-namelong_press" style="width:50px; margin-left: 0px; text-align: right;">Name</label>
        <input type="text" id="node-input-namelong_press" style="width:200px;margin-left: 5px; text-align: left;">
    </div>
    
    <div class="form-row">
        <input type="checkbox" id="node-input-toggleValues" style="display:inline-block; width:auto; vertical-align:top;" />
        <label style="width:auto" for="node-input-toggleValues">
            <img
                src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAB7CAAAewgFu0HU+AAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDggNzkuMTY0MDM2LCAyMDE5LzA4LzEzLTAxOjA2OjU3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDMtMjNUMTY6MjM6MjMrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAzLTIzVDE2OjI1OjM0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAzLTIzVDE2OjI1OjM0KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJmNGM3NWVjLTIwNGYtNGY1YS05YTMxLTQ5NTU5YWJmZDE4NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpiZjRjNzVlYy0yMDRmLTRmNWEtOWEzMS00OTU1OWFiZmQxODUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZjRjNzVlYy0yMDRmLTRmNWEtOWEzMS00OTU1OWFiZmQxODUiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJmNGM3NWVjLTIwNGYtNGY1YS05YTMxLTQ5NTU5YWJmZDE4NSIgc3RFdnQ6d2hlbj0iMjAyMC0wMy0yM1QxNjoyMzoyMyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nhtLUgAAAE9JREFUKJG1UMsOACAIgub//7IdqvVQtjrExU1EEQLuiGCvgTNgl5D74MmVZPu4wIxQAgm+/sDec2VhgQPgf0sq1unjMlYJE/3MZrvy+kMFZQkZEWfC7ikAAAAASUVORK5CYII="></img>
            Toggle values
        </label>
    </div>

</div>
        

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>


</script>

<script type="text/markdown" data-help-name="knxUltimateHueButton">

[Find it useful?](https://www.paypal.me/techtoday)

This node lets you get the events of your HUE button.<br/>
There are many event you can choose from. The relevants one are *short release* and *repeat*.<br/>
In *short release* you can send true/false to your KNX group address to, for example, toggle a light.<br/>
In *repeat* event, you can DIM a KNX light.<br/>
The **toggle values** option is enabled by default. This option toggles the value of each KNX group address (*true/false, increase/decrease dim*))

**General**
|Property|Description|
|--|--|
| KNX GW | Select the KNX gateway to be used |
| HUE Bridge | Select the HUE Bridge to be used |
| Hue Button | HUE button to be used. The avaiable buttons start showing up while you're typing.|

<br/>

**PHILIPS HUE BUTTON EVENTS -> TO KNX**
Here you can get the HUE button events.<br/>
Start typing in the GA field, the name or group address of your KNX device, the avaiable devices start showing up while you're typing.

|Property|Description|
|--|--|
| Initial press | As soon as you press your HUE button, this event fires|
| Repeat | This command is used either to send DIM (increase/decrease) or true/false commands to the KNX group address |
| Short release | Rapid push of the button, fired as soon as you release your finger from the button. Usually used to toggle a KNX light true/false |
| Long release | Long press of the button, fired as soon as you release your finger from the button |
| Long press | Long press of the button, fired as soon as you long press the button |
| Toggle values | Enable or disable toggling values. If enabled, all values toggles, otherwise, all values are sent as *true* or *increase dim*, to the selected KNX group address. |


<br/>
    </script>